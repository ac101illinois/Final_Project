{% extends "base.html" %}
{% block content %}

<h1>My Books</h1>

<!-- Search Form -->
<form method="GET" action="" class="search-form">
    <input type="text" name="q" placeholder="Search my books" value="{{ query|default:'' }}">
    <button type="submit">Search</button>
</form>

<hr>

{% if books %}
    <div class="book-grid">
        {% for book in books %}
            <div class="book-card">

                <!-- Book Cover -->
                {% if book.cover %}
                    <img src="{{ book.cover }}" alt="{{ book.title }}" class="book-cover">
                {% else %}
                    <div class="no-cover">No Cover Available</div>
                {% endif %}

                <!-- Book Info -->
                <h3>{{ book.title }}</h3>
                <p>{{ book.author }}</p>

                {% if book.total_pages %}
                    <p>{{ book.total_pages }} pages</p>
                {% endif %}

                <!-- REMOVE BUTTON -->
                <form method="POST" action="">
                    {% csrf_token %}
                    <input type="hidden" name="book_id" value="{{ book.id }}">
                    <button type="submit" name="remove_book" class="remove-btn">
                        Remove Book
                    </button>
                </form>

            </div>
        {% endfor %}
    </div>

{% else %}
    <p>You have no books yet.</p>
{% endif %}

<style>
    .search-form {
    margin-bottom: 20px;
}

.book-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
    gap: 20px;
}

.book-card {
    padding: 12px;
    border: 1px solid #ddd;
    border-radius: 8px;
    text-align: center;
    background: #fafafa;
}

.book-cover {
    width: 100%;
    height: auto;
    border-radius: 5px;
}

.no-cover {
    width: 100%;
    padding: 40px 0;
    background: #eee;
    border-radius: 5px;
    font-size: 14px;
}

.remove-btn {
    background-color: #c0392b;
    color: white;
    padding: 6px 12px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    margin-top: 10px;
}

.remove-btn:hover {
    background-color: #e74c3c;}
</style>

{% endblock %}